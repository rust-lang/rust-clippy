#![feature(rustc_private)]
#![warn(clippy::needless_impl_lint_pass)]

extern crate rustc_lint;
extern crate rustc_middle;
extern crate rustc_session;

use clippy_utils::msrvs::Msrv;
use rustc_session::{declare_lint_pass, impl_lint_pass};

declare_lint_pass!(WithoutFieldsSemi => []);
//~^ needless_impl_lint_pass

declare_lint_pass!(WithoutFieldsBraces => []);
//~^ needless_impl_lint_pass

declare_lint_pass!(WithoutFieldsAfterMacro => []);
//~^ needless_impl_lint_pass

struct WithFields {
    msrv: Msrv,
}

// don't lint: can't use `declare_lint_pass!` because of the field
impl_lint_pass!(WithFields => []);

// don't lint: `impl_lint_pass!` not written by the user
declare_lint_pass!(NoFields2 => []);
