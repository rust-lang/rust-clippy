#![warn(clippy::const_sized_windows)]
#![feature(array_windows)]
#![allow(unused_variables)]
#![allow(dead_code)]

fn test_binding() {
    let numbers = [0, 1, 2, 3, 4];

    #[allow(clippy::needless_borrow)]
    for [a, b] in numbers.array_windows() {
        //~^ const_sized_windows
    }

    #[allow(unused_mut)]
    for [a, b] in numbers.array_windows() {
        //~^ const_sized_windows
    }

    for [a, b] in numbers.array_windows() {
        //~^ const_sized_windows
    }
}

fn test_slice_like() {
    let numbers = [2; 5];
    for [a, b] in numbers.array_windows() {
        //~^ const_sized_windows
    }

    let numbers = [0, 1, 2, 3, 4];
    for [a, b] in numbers.array_windows() {
        //~^ const_sized_windows
    }

    let numbers = &[0, 1, 2, 3, 4];
    for [a, b] in numbers.array_windows() {
        //~^ const_sized_windows
    }

    let numbers = &&[0, 1, 2, 3, 4];
    for [a, b] in numbers.array_windows() {
        //~^ const_sized_windows
    }

    let numbers = &&&[0, 1, 2, 3, 4];
    for [a, b] in numbers.array_windows() {
        //~^ const_sized_windows
    }

    let numbers = Vec::from_iter(0..5);
    for [a, b] in numbers.array_windows() {
        //~^ const_sized_windows
    }

    let numbers = &Vec::from_iter(0..5);
    for [a, b] in numbers.array_windows() {
        //~^ const_sized_windows
    }
}

fn test_const_eval() {
    const N: usize = 2;

    let numbers = [2; 5];
    for [a, b] in numbers.array_windows() {
        //~^ const_sized_windows
    }

    for [a, b, c] in numbers.array_windows() {
        //~^ const_sized_windows
    }
}

fn test_chunk_size() {
    let numbers = Vec::from_iter(0..5);
    for chunk in numbers.windows(0) {}

    for [a] in numbers.array_windows() {
        //~^ const_sized_windows
    }

    for [a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z] in numbers.array_windows() {
        //~^ const_sized_windows
    }

    for chunk in numbers.windows(27) {}
}

fn main() {}
